<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lab 7 - Mad Lib</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #f2f5fb;
      color: #222;
    }

    header {
      background: #0b3d91;
      color: #fff;
      padding: 20px;
      text-align: center;
    }

    header h1 {
      margin: 0 0 5px 0;
    }

    header p {
      margin: 0;
      font-size: 0.95rem;
    }

    main {
      max-width: 800px;
      margin: 20px auto 40px auto;
      padding: 0 15px;
    }

    .form-section,
    .result-section,
    .addendum {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    .form-section h2,
    .result-section h2,
    .addendum h2 {
      margin-top: 0;
      color: #0b3d91;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    button[type="submit"] {
      background: #0b3d91;
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }

    button[type="submit"]:hover {
      opacity: 0.9;
    }

    .result-section p {
      line-height: 1.6;
    }

    .error {
      color: #b00020;
      font-weight: bold;
      margin-bottom: 10px;
    }

    footer {
      text-align: center;
      padding: 10px 0 20px 0;
      font-size: 0.85rem;
      color: #555;
    }

    #storyResult {
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Lab 7: Mad Lib Form</h1>
    <p>Fill in the blanks to generate your custom story!</p>
  </header>

  <main>
    <section class="form-section">
      <h2>Mad Lib Form</h2>

      <p id="errorMessage" class="error" style="display:none;"></p>

      <!-- No action attribute: JS will handle everything -->
      <form id="madLibForm">
        <div class="form-group">
          <label for="name">Name (person's name):</label>
          <input type="text" id="name" name="name" required>
        </div>

        <div class="form-group">
          <label for="adjective">Adjective:</label>
          <input type="text" id="adjective" name="adjective" required>
        </div>

        <div class="form-group">
          <label for="noun">Noun (object):</label>
          <input type="text" id="noun" name="noun" required>
        </div>

        <div class="form-group">
          <label for="place">Place:</label>
          <input type="text" id="place" name="place" required>
        </div>

        <div class="form-group">
          <label for="animal">Plural Noun (animals / things):</label>
          <input type="text" id="animal" name="animal" required>
        </div>

        <div class="form-group">
          <label for="verb">Verb (action word):</label>
          <input type="text" id="verb" name="verb" required>
        </div>

        <button type="submit">Go Mad!</button>
      </form>

      <!-- ðŸ”» STORY APPEARS HERE, BELOW THE BUTTON -->
      <div id="storyResult" class="result-section" style="display:none;">
        <h2>Your Mad Lib Story</h2>
        <p id="storyText"></p>
      </div>
    </section>

    <section class="addendum">
      <h2>Addendum</h2>
      <p>
        This page uses front-end JavaScript to dynamically generate a Mad Lib
        story. When the user clicks the "Go Mad!" button, the form submission
        is intercepted with JavaScript, the input values are read, and a story
        is constructed and displayed directly below the button without leaving
        the page. This provides an interactive user experience where the form
        and the result are shown together on the same page.
      </p>
    </section>
  </main>

  <footer>
    <p>Last updated: <span id="lastModified"></span></p>
  </footer>

  <script type="text/javascript">
    // Last modified footer script
    var x = document.lastModified;
    document.getElementById('lastModified').textContent = x;

    // Mad Lib JS logic
    const form = document.getElementById('madLibForm');
    const errorMessage = document.getElementById('errorMessage');
    const storyResult = document.getElementById('storyResult');
    const storyText = document.getElementById('storyText');

    form.addEventListener('submit', function (event) {
      event.preventDefault(); // ðŸš« Stop actual POST (avoids 405 and page change)

      const name = document.getElementById('name').value.trim();
      const adjective = document.getElementById('adjective').value.trim();
      const noun = document.getElementById('noun').value.trim();
      const place = document.getElementById('place').value.trim();
      const animal = document.getElementById('animal').value.trim();
      const verb = document.getElementById('verb').value.trim();

      if (!name || !adjective || !noun || !place || !animal || !verb) {
        errorMessage.textContent = 'Please fill out ALL fields before submitting your Mad Lib.';
        errorMessage.style.display = 'block';
        storyResult.style.display = 'none';
        return;
      }

      errorMessage.style.display = 'none';

      const story = `
        One ${adjective} morning, ${name} grabbed a ${noun} and rushed to ${place}.
        On the way, ${name} saw a group of ${animal} trying to ${verb} in the middle of the road!
        Everyone stopped and laughed because it was the most ${adjective} thing they had ever seen.
      `;

      storyText.textContent = story.trim();
      storyResult.style.display = 'block';
    });
  </script>
</body>
</html>
